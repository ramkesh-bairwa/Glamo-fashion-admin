(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1038],{7187:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>g});var a=n(5155),r=n(2115),l=n(6874),t=n.n(l),c=n(7168),i=n(9852),d=n(8524),h=n(8482),o=n(4503),x=n(7133),j=n(7924),m=n(4616),u=n(5623),f=n(9917),N=n(2525),b=n(6160);function g(){let{toast:e}=(0,o.dj)(),[s,n]=(0,r.useState)([]),[l,g]=(0,r.useState)(!0),[p,w]=(0,r.useState)(""),[A,y]=(0,r.useState)(!1),[v,C]=(0,r.useState)(null),[S,E]=(0,r.useState)(1),[_,k]=(0,r.useState)(1);(0,r.useEffect)(()=>{B(),console.log(s)},[p,S]);let B=async()=>{try{g(!0);let e=await fetch("/api/brands?search=".concat(p,"&page=").concat(S,"&limit=").concat(10)),s=await e.json();e.ok?(n(s.brands),k(Math.ceil(s.total/10))):console.error("Failed to fetch brands:",s.message)}catch(e){console.error("Error fetching brands:",e)}finally{g(!1)}},D=async()=>{if(v)try{let a=await fetch("/api/brands/".concat(v),{method:"DELETE"});if(a.ok)n(s.filter(e=>e.id!==v)),y(!1),C(null),e({title:"Brand Deleted",description:"The brand deleted successfully.",duration:2e3,className:"bg-red-500 text-white text-center font-semibold"});else{let e=await a.json();console.error("Failed to delete brand:",e.message)}}catch(e){console.error("Error deleting brand:",e)}},$=e=>{C(e),y(!0)};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 w-full max-w-sm",children:[(0,a.jsx)(i.p,{placeholder:"Search brands...",value:p,onChange:e=>{w(e.target.value),E(1)},className:"max-w-sm"}),(0,a.jsx)(c.$,{variant:"outline",size:"icon",children:(0,a.jsx)(j.A,{className:"h-4 w-4"})})]}),(0,a.jsx)(c.$,{asChild:!0,children:(0,a.jsxs)(t(),{href:"/dashboard/brands/new",children:[(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Add New Brand"]})})]}),(0,a.jsxs)(h.Zp,{children:[(0,a.jsxs)(h.aR,{children:[(0,a.jsx)(h.ZB,{children:"Brands"}),(0,a.jsx)(h.BT,{children:"Manage your brands."})]}),(0,a.jsx)(h.Wu,{children:l?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("p",{children:"Loading brands..."})}):(0,a.jsxs)(d.XI,{children:[(0,a.jsx)(d.A0,{children:(0,a.jsxs)(d.Hj,{children:[(0,a.jsx)(d.nd,{children:"Name"}),(0,a.jsx)(d.nd,{children:"Icon"}),(0,a.jsx)(d.nd,{children:"Domain"}),(0,a.jsx)(d.nd,{children:"Brand URL"}),(0,a.jsx)(d.nd,{children:"Created At"}),(0,a.jsx)(d.nd,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(d.BF,{children:Array.isArray(s)&&0===s.length?(0,a.jsx)(d.Hj,{children:(0,a.jsx)(d.nA,{colSpan:5,className:"text-center",children:"No Brand found"})}):null==s?void 0:s.map(e=>(0,a.jsxs)(d.Hj,{children:[(0,a.jsx)(d.nA,{className:"font-medium",children:e.name}),(0,a.jsx)(d.nA,{children:s.icon?(0,a.jsx)("img",{src:"/uploads/brand-icons/".concat(e.icon),alt:e.name,className:"w-12 h-12 rounded-xl border border-gray-300 shadow-sm transition-transform duration-200 hover:scale-105"}):(0,a.jsx)("div",{className:"w-12 h-12 bg-gray-200 rounded flex items-center justify-center text-xs text-gray-500",children:"N/A"})}),(0,a.jsx)(d.nA,{children:e.domain}),(0,a.jsx)(d.nA,{children:e.brand_url}),(0,a.jsx)(d.nA,{children:new Date(e.created_at).toLocaleDateString()}),(0,a.jsx)(d.nA,{className:"text-right",children:(0,a.jsxs)(x.rI,{children:[(0,a.jsx)(x.ty,{asChild:!0,children:(0,a.jsxs)(c.$,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,a.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,a.jsx)(u.A,{className:"h-4 w-4"})]})}),(0,a.jsxs)(x.SQ,{align:"end",children:[(0,a.jsx)(x.lp,{children:"Actions"}),(0,a.jsx)(x.mB,{}),(0,a.jsx)(x._2,{asChild:!0,children:(0,a.jsxs)(t(),{href:"/dashboard/brands/".concat(e.id),children:[(0,a.jsx)(f.A,{className:"mr-2 h-4 w-4"})," Edit"]})}),(0,a.jsxs)(x._2,{className:"text-red-600",onClick:()=>$(e.id),children:[(0,a.jsx)(N.A,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})})]},e.id))})]})})]}),(0,a.jsxs)("div",{className:"flex justify-center items-center gap-2 mt-4",children:[(0,a.jsx)(c.$,{variant:"outline",disabled:1===S,onClick:()=>E(e=>Math.max(e-1,1)),children:"Previous"}),(0,a.jsxs)("span",{className:"text-sm font-medium",children:["Page ",S," of ",_]}),(0,a.jsx)(c.$,{variant:"outline",disabled:S===_,onClick:()=>E(e=>Math.min(e+1,_)),children:"Next"})]}),(0,a.jsx)(b.A,{open:A,onOpenChange:y,onConfirm:D})]})}},7796:(e,s,n)=>{Promise.resolve().then(n.bind(n,7187))}},e=>{var s=s=>e(e.s=s);e.O(0,[3455,3056,7239,5452,7328,4844,6231,8441,1684,7358],()=>s(7796)),_N_E=e.O()}]);