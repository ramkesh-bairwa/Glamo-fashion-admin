(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9926],{6103:(e,s,c)=>{"use strict";c.r(s),c.d(s,{default:()=>g});var r=c(5155),n=c(2115),t=c(6874),a=c.n(t),l=c(7168),i=c(9852),d=c(8524),h=c(8482),o=c(7133),x=c(3373),j=c(6559),m=c(7924),u=c(4616),p=c(5623),N=c(9917),f=c(2525);function g(){let[e,s]=(0,n.useState)([]),[c,t]=(0,n.useState)(!0),[g,v]=(0,n.useState)(""),[A,w]=(0,n.useState)(1),[y,k]=(0,n.useState)(1),[C,E]=(0,n.useState)(!1),[S,b]=(0,n.useState)(null);(0,n.useEffect)(()=>{_()},[A,g]);let _=async()=>{try{t(!0);let e=await fetch("/api/products?page=".concat(A,"&search=").concat(g)),c=await e.json();e.ok?(s(c.products),k(c.totalPages)):console.error("Failed to fetch products:",c.message)}catch(e){console.error("Error fetching products:",e)}finally{t(!1)}},F=async()=>{if(S)try{let c=await fetch("/api/products/".concat(S),{method:"DELETE"});if(c.ok)s(e.filter(e=>e.id!==S)),E(!1),b(null);else{let e=await c.json();console.error("Failed to delete product:",e.message)}}catch(e){console.error("Error deleting product:",e)}},$=e=>{b(e),E(!0)};return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 w-full max-w-sm",children:[(0,r.jsx)(i.p,{placeholder:"Search products...",value:g,onChange:e=>v(e.target.value),className:"max-w-sm"}),(0,r.jsx)(l.$,{variant:"outline",size:"icon",children:(0,r.jsx)(m.A,{className:"h-4 w-4"})})]}),(0,r.jsx)(l.$,{asChild:!0,children:(0,r.jsxs)(a(),{href:"/dashboard/products/new",children:[(0,r.jsx)(u.A,{className:"mr-2 h-4 w-4"})," Add Product"]})})]}),(0,r.jsxs)(h.Zp,{children:[(0,r.jsxs)(h.aR,{children:[(0,r.jsx)(h.ZB,{children:"Products"}),(0,r.jsx)(h.BT,{children:"Manage your product inventory, prices, and stock levels."})]}),(0,r.jsx)(h.Wu,{children:c?(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)("p",{children:"Loading products..."})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(d.XI,{children:[(0,r.jsx)(d.A0,{children:(0,r.jsxs)(d.Hj,{children:[(0,r.jsx)(d.nd,{children:"Name"}),(0,r.jsx)(d.nd,{children:"Category"}),(0,r.jsx)(d.nd,{className:"text-right",children:"Price"}),(0,r.jsx)(d.nd,{className:"text-right",children:"Stock"}),(0,r.jsx)(d.nd,{children:"Created At"}),(0,r.jsx)(d.nd,{className:"text-right",children:"Actions"})]})}),(0,r.jsx)(d.BF,{children:0===e.length?(0,r.jsx)(d.Hj,{children:(0,r.jsx)(d.nA,{colSpan:6,className:"text-center",children:"No products found"})}):e.map(e=>(0,r.jsxs)(d.Hj,{children:[(0,r.jsx)(d.nA,{className:"font-medium",children:e.name}),(0,r.jsx)(d.nA,{children:e.category}),(0,r.jsxs)(d.nA,{className:"text-right",children:["$","number"==typeof e.price?e.price.toFixed(2):parseFloat(e.price).toFixed(2)]}),(0,r.jsx)(d.nA,{className:"text-right",children:e.stock}),(0,r.jsx)(d.nA,{children:new Date(e.created_at).toLocaleDateString()}),(0,r.jsx)(d.nA,{className:"text-right",children:(0,r.jsxs)(o.rI,{children:[(0,r.jsx)(o.ty,{asChild:!0,children:(0,r.jsxs)(l.$,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,r.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,r.jsx)(p.A,{className:"h-4 w-4"})]})}),(0,r.jsxs)(o.SQ,{align:"end",children:[(0,r.jsx)(o.lp,{children:"Actions"}),(0,r.jsx)(o.mB,{}),(0,r.jsx)(o._2,{asChild:!0,children:(0,r.jsxs)(a(),{href:"/dashboard/products/".concat(e.id),children:[(0,r.jsx)(N.A,{className:"mr-2 h-4 w-4"})," Edit"]})}),(0,r.jsxs)(o._2,{className:"text-red-600",onClick:()=>$(e.id),children:[(0,r.jsx)(f.A,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})})]},e.id))})]}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(x.dK,{children:(0,r.jsxs)(x.Iu,{children:[(0,r.jsx)(x.cU,{children:(0,r.jsx)(x.Eb,{onClick:()=>w(e=>Math.max(e-1,1)),className:1===A?"pointer-events-none opacity-50":""})}),Array.from({length:y},(e,s)=>s+1).map(e=>(0,r.jsx)(x.cU,{children:(0,r.jsx)(x.n$,{isActive:e===A,onClick:()=>w(e),children:e})},e)),(0,r.jsx)(x.cU,{children:(0,r.jsx)(x.WA,{onClick:()=>w(e=>Math.min(e+1,y)),className:A===y?"pointer-events-none opacity-50":""})})]})})})]})})]}),(0,r.jsx)(j.Lt,{open:C,onOpenChange:E,children:(0,r.jsxs)(j.EO,{children:[(0,r.jsxs)(j.wd,{children:[(0,r.jsx)(j.r7,{children:"Are you sure?"}),(0,r.jsx)(j.$v,{children:"This action cannot be undone. This will permanently delete the product and remove it from our servers."})]}),(0,r.jsxs)(j.ck,{children:[(0,r.jsx)(j.Zr,{children:"Cancel"}),(0,r.jsx)(j.Rx,{onClick:F,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})}},7415:(e,s,c)=>{Promise.resolve().then(c.bind(c,6103))}},e=>{var s=s=>e(e.s=s);e.O(0,[3455,3056,7239,5452,7328,4844,4984,8441,1684,7358],()=>s(7415)),_N_E=e.O()}]);